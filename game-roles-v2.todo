TODO: Test functionality of role assigning, everything which doesn't need commands as they are being transformed.